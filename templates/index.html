<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zobo - Your AI Friend</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Google Drive Picker API -->
    <script src="https://apis.google.com/js/api.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head>
<body>
    <div class="chat-container">
        <!-- Header -->
        <header class="chat-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="robot-logo">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="brand-info">
                        <h1 class="brand-title">Zobo</h1>
                        <p class="brand-subtitle">Your AI Friend</p>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="action-btn" id="wakewordToggleBtn" title="Toggle Wakeword Listening">
                        <i class="fas fa-microphone-alt"></i>
                    </button>
                    <button class="action-btn" id="voiceStatusBtn" title="Voice API Status">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="action-btn" id="clearBtn" title="Clear conversation">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="action-btn" id="statusBtn" title="Check API status">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Status Alert -->
        <div id="statusAlert" class="status-alert alert-warning d-none" role="alert">
            <i class="fas fa-exclamation-triangle"></i>
            <span id="statusMessage"></span>
            <button type="button" class="alert-close" data-bs-dismiss="alert">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Chat Messages Container -->
        <div class="chat-messages" id="chatContainer">
            <div class="messages-wrapper">
                <div id="messagesArea">
                    <!-- Welcome message -->
                    <div class="message assistant-message">
                        <div class="message-avatar">
                            <div class="avatar-circle">
                                <i class="fas fa-robot"></i>
                            </div>
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-name">Zobo</span>
                                <span class="message-time">Just now</span>
                            </div>
                            <div class="message-text">
                                Hey there! I'm Zobo, your AI friend! Think of me as that buddy who's always ready to chat, help out, or just listen. Whether you want to talk about your day, work through problems together, or explore ideas - I'm here for you. What's on your mind?
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Loading indicator -->
                <div id="loadingIndicator" class="message assistant-message d-none">
                    <div class="message-avatar">
                        <div class="avatar-circle">
                            <i class="fas fa-robot"></i>
                        </div>
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-name">Zobo</span>
                            <span class="message-time">Typing...</span>
                        </div>
                        <div class="message-text">
                            <div class="typing-indicator">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Message Input Area -->
        <div class="chat-input-area">
            <div class="input-container">
                <form id="chatForm" class="input-form">
                    <div class="input-wrapper">
                        <button class="attach-btn" type="button" id="attachBtn" data-bs-toggle="dropdown" aria-expanded="false" title="Attach files">
                            <i class="fas fa-plus"></i>
                        </button>
                        <ul class="dropdown-menu" id="attachMenu">
                            <li><a class="dropdown-item" href="#" id="localFileBtn"><i class="fas fa-file me-2"></i>Connect File to Zobo</a></li>
                            <li><a class="dropdown-item" href="#" id="oneDriveBtn"><i class="fab fa-microsoft me-2"></i>OneDrive</a></li>
                            <li><a class="dropdown-item" href="#" id="addLinkBtn"><i class="fas fa-link me-2"></i>Add Link</a></li>
                        </ul>
                        <button class="voice-btn" type="button" id="recordBtn" title="Record voice message">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <textarea 
                            id="messageInput" 
                            class="message-input" 
                            placeholder="Message Zobo..."
                            rows="1"
                            maxlength="2000"
                        ></textarea>
                        <button class="voice-btn" type="button" id="speakBtn" title="Speak message">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <button class="send-btn" type="submit" id="sendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <div class="input-footer">
                        <small class="char-count">
                            <span id="charCount">0</span>/2000
                        </small>
                    </div>
                </form>
            </div>
            <!-- Hidden file input -->
            <input type="file" id="fileInput" style="display: none;" multiple accept=".txt,.pdf,.doc,.docx,.jpg,.jpeg,.png,.gif">
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
    <script src="{{ url_for('static', filename='js/wakeword.js') }}"></script>
</body>
</html>
